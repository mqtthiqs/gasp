\RequirePackage{stmaryrd}
\RequirePackage{amssymb}
\RequirePackage{amsmath}

% Shortcuts
%%%%%%%%%%%
\newcommand\system{$S^2$}

% Layout
%%%%%%%%
\newcommand\bnfcomment[1]{\qquad\textsl{#1}}
\newcommand\defcomment[1]{\textsl{#1}}
\newcommand\kw[1]{\textbf{#1}}
\newcommand\listof[1]{\vec{#1}}
\newcommand\emptylist{\bullet}
\newcommand\conslist[2]{#1\,#2}
\newcommand\concat[2]{#1 \,@\, #2}
\newcommand\boxedtitle[1]{\boxed{#1}\vspace{-0.3cm}}

% Our system Syntax
%%%%%%%%%%%%%%%%%%%

% Meta-variables
\newcommand\term{t}
\newcommand\termbis{u}
\newcommand\head{h}
\newcommand\spine{l}
\newcommand\adef{d}
\newcommand\adefs{D}
\newcommand\binding{b}
\newcommand\var{x}
\newcommand\varbis{y}
\newcommand\type{A}
\newcommand\typebis{B}
\newcommand\promise{p}
\newcommand\constant{c}
\newcommand\tyconstant{a}
\newcommand\kind{K}

% Term construction
\newcommand\tapp[2]{#1\,(#2)}
\newcommand\tlam[2]{\lambda #1. #2}
\newcommand\tdef[2]{#1 \;\kw{in}\; #2}
\newcommand\topen[2]{[ #1 ]_{#2}}

% Misc
\newcommand\oftype[3]{#1 \stackrel{#2}{:} #3}
\newcommand\fv[1]{FV(#1)}

% Definition construction
\newcommand\xadef[4]{[#1 = \oftype{#2}{#3}{#4}]}

% Binding construction
\newcommand\bind[3]{[#1 \stackrel{#2}{:} #3]}

% Type construction
\newcommand\typrod[2]{\pi #1. #2}
\newcommand\tyapp[2]{#1\,(#2)}
\newcommand\tyopen[2]{\topen{#1}{#2}}
\newcommand\tydef[2]{\tdef{#1}{#2}}

% Kind construction
\newcommand\ktype{\star}
\newcommand\kprod[2]{\typrod{#1}{#2}}

% Promise construction
\newcommand\prigid{\mathcal{R}}
\newcommand\pany{\mathcal{A}}
\newcommand\pmin[2]{#1 \sqcap #2}

% Spine form LF Syntax
%%%%%%%%%%%%%%%%%%%%%%

% Metavariables
\newcommand\slfterm{s}
\newcommand\slftype{T}
\newcommand\slfkind{S}
\newcommand\slfspine{m}

% Constructions
\newcommand\slfbind[2]{(#1 : #2)}

% Opening
%%%%%%%%%
\newcommand\openscope[3]{#1 \vdash #2 \Uparrow #3}
\newcommand\openscopespine[5]{#1 ; #2 \vdash #3 \,\triangleleft\, #4 \Uparrow #5}

% Expansion
%%%%%%%%%%%
\newcommand\interpret[2]{\llbracket #1 \rrbracket_{#2}}
\newcommand\interprettyenv[1]{\llbracket #1 \rrbracket}

% Environments
%%%%%%%%%%%%%%

% Metavariables
\newcommand\tyenv{\Gamma}

% Constructions
\newcommand\tenvempty{\bullet}
\newcommand\tenvlookup[2]{#1[#2]}
\newcommand\tenvlookuptype[2]{#1(#2)}
\newcommand\tenvcons[2]{#1 \, #2}
\newcommand\tenvbind[4]{\tenvcons{#1}{\bind{#2}{#3}{#4}}}
\newcommand\tenvdef[4]{\tenvcons{#1}{\xadef{#2}{#3}{#4}}}

% Well-formed sharing
%%%%%%%%%%%%%%%%%%%%%

% Metavariables
\newcommand\pretype{\sigma}
\newcommand\prekind{\kappa}

% Construction
\newcommand\ptconst{\square}
\newcommand\ptarrow[3]{#1 \stackrel{#2}{\rightarrow} #3}
\newcommand\pkconst{\star}
\newcommand\pkarrow[3]{\ptarrow{#1}{#2}{#3}}

% Operations
\newcommand\erase[1]{\lfloor #1 \rfloor}

% Judgments
\newcommand\wellsharedterm[4]{#1 \vdash_{s} \oftype{#2}{#3}{#4}}
\newcommand\wellsharedhead[4]{#1 \vdash_{s} \oftype{#2}{#3}{#4}}
\newcommand\wellsharedadefs[2]{#1 \vdash_{s} #2}
\newcommand\wellsharedspine[4]{#1 ; #2 \vdash_{s} #3 \uparrow #4}
\newcommand\wellsharedtype[2]{#1 \vdash_{s} #2}
\newcommand\wellsharedkindspine[3]{#1 ; #2 \vdash_{s} #3}
\newcommand\subpretype[2]{#1 \,\trianglelefteq\, #2}

% Type checking
%%%%%%%%%%%%%%%

% Judgements
\newcommand\tcterm[4]{#1 \vdash #2 \stackrel{#3}{\Uparrow} #4}
\newcommand\tcdefs[2]{#1 \vdash #2}
\newcommand\tcspine[5]{#1 ; #2 \vdash #3 \stackrel{#4}\Uparrow #5}
\newcommand\equalterm[4]{#1 \vdash #2 \equiv #3 : #4}
\newcommand\equalwhnfterm[4]{#1 \vdash #2 \leftrightarrow #3 : #4}
\newcommand\whnfbis[5]{#1 \vdash #2 \,\triangleleft\, #3 \Downarrow \tdef{#4}{#5}}
\newcommand\whnf[6]{\whnfbis{#1}{#2 : #3}{#4}{#5}{#6}}
\newcommand\equaltype[3]{#1 \vdash #2 \equiv #3}
\newcommand\equalspine[4]{#1; #2 \vdash #3 \equiv #4}
\newcommand\distinctheads[2]{#1 \vdash #2 \textrm{ pat}}
